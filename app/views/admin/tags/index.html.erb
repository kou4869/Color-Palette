<div class="admin-tag">
  <div class="container">
    <h4 class="mt-3"><strong>タグ一覧・追加・編集</strong></h4>
    <div class="row mt-5">

      <div class="col-4 offset-1">
        <tadle class="table table-borderless">
          <%= form_with model: [:admin, @tag] do |tag| %>
            <tr>
              <p>
                <strong><%= tag.label :"タグ名" %></strong><br>
                <%= tag.text_field :tag_name, :placeholder => "タグ名" %>
              </p>
              <p>
                <%= tag.submit "新規登録", class: "btn btn-info" %>
              </p>
            </tr>
          <% end %>
        </tadle>
      </div>

      <!--↓ 無限スクロール用のid-->
      <%= link_to posts_path do %>
        <span id="page_top"></span>
      <% end %>

      <div class="col-6">
        <table class="table text-secondary">
          <thead>
            <tr>
              <th>タグ名</th>
              <th>投稿登録数</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% @tags.each do |tags| %>
              <tr>
                <%= form_with model: [:admin, tags], method: :patch do |t| %>
                  <td class="align-middle"><%= t.text_field :tag_name %></td>
                  <td align="center"><%= PostTag.where(tag_id: tag.id).count %></td>
                  <td><%= t.submit '変更を保存', class: 'btn btn-success' %></td>
                <% end %>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>


<script>
  var jscrollOption = {
    loadingHtml: '読み込み中・・・', //記事読み込み中の表示
    autoTrigger: true, // 自動で読み込むか否か、trueで自動、falseでボタンクリックとなる。
    padding: 20, // 指定したコンテンツの下かた何pxで読み込むかを指定(autoTrigger: trueの場合のみ)
    contentSelector: '.jscroll' // 読み込む範囲の指定
  };
  $('.jscroll').jscroll(jscrollOption);
</script>